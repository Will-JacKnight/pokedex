{"ast":null,"code":"import{levels}from'../icons';import heartImg from'../images/heart.svg';import{Link,useNavigate}from'react-router-dom';import{useState,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'http://localhost:5000';function PokemonCard(_ref){let{pokemon,index,level=false,sidebar=false}=_ref;const doubleClickRef=useRef(false);const navigate=useNavigate();async function addFavourite(pokemon_name){try{const response=await fetch(`${API_BASE_URL}/addFavourite`,{method:'POST',headers:{Authorization:`Bearer ${sessionStorage.getItem('access_token')}`,'Content-Type':'application/json'},body:JSON.stringify({\"pokemon_name\":pokemon_name})});if(!response.ok){throw response;}const data=await response.json();if(data.success){alert(\"You have added this pokemon to your favourites successfully!\");}}catch(reponse){if(reponse.status===401){sessionStorage.removeItem('access_token');alert('Token issue. Please login again');}else{alert('Something went wrong. Please try again later');}}}async function removeFavourite(){try{const response=await fetch(`${API_BASE_URL}/removeFavourite`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${sessionStorage.getItem('access_token')}`},body:JSON.stringify({\"pokemon_name\":pokemon.name})});if(!response.ok){throw response;}const data=await response.json();if(data.success){navigate('/',{state:{refresh:Date.now()}});window.location.reload();alert(\"You have removed this pokemon from your favourites successfully!\");}}catch(reponse){if(reponse.status===401){sessionStorage.removeItem('access_token');alert('Token issue. Please login again');}else{alert('Something went wrong. Please try again later');}}}let clickTimeout=null;const handleClick=()=>{if(clickTimeout){clearTimeout(clickTimeout);// Cancel the single-click timer\n}clickTimeout=setTimeout(()=>{if(!doubleClickRef.current){navigate(`/details/${pokemon.name}`);// Only navigate if no double-click occurred\n}},600);// Adjust delay to fit double-click recognition timing\n};const handleDoubleClick=()=>{if(!sidebar){if(clickTimeout){clearTimeout(clickTimeout);// Cancel the single-click timer\nclickTimeout=null;}doubleClickRef.current=true;// Mark that a double-click occurred\nif(sessionStorage.getItem('access_token')){addFavourite(pokemon.name);}else{alert(\"Please login to add pokemons to your favourites\");}setTimeout(()=>{doubleClickRef.current=false;// Reset double-click flag\n},600);}};// console.log(pokemon)\n// if (pokemon.length === 0) {\n//   console.log(\"Pokemon is null\");\n//   return null\n// }\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"card-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pokemon-poster normal-type\",onClick:handleClick,onDoubleClick:handleDoubleClick,children:[level&&/*#__PURE__*/_jsx(\"img\",{className:\"pokemon-level\",src:levels[`lv${pokemon.level}`],alt:\"level\"}),/*#__PURE__*/_jsxs(\"h3\",{className:\"hp\",children:[\"HP: \",pokemon.hp]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{className:\"pokemon-name\",children:(pokemon===null||pokemon===void 0?void 0:pokemon.name[0].toUpperCase())+(pokemon===null||pokemon===void 0?void 0:pokemon.name.slice(1))})}),/*#__PURE__*/_jsx(\"img\",{src:pokemon.image,alt:pokemon.name,className:\"pokemon-poster-img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pokemon-stats\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"ATT\"}),\"\\xA0\\xA0\",pokemon.attack]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"DEF\"}),\"\\xA0\\xA0\",pokemon.defense]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pokemon-stats\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"WEIGHT\"}),\"\\xA0\\xA0\",pokemon.weight]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"SPEED\"}),\"\\xA0\\xA0\",pokemon.speed]})]})]})]}),sidebar&&/*#__PURE__*/_jsx(\"p\",{className:\"remove-pokemon\",onClick:removeFavourite,children:\"Remove Pokemon\"})]},index);}export default PokemonCard;","map":{"version":3,"names":["levels","heartImg","Link","useNavigate","useState","useRef","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","PokemonCard","_ref","pokemon","index","level","sidebar","doubleClickRef","navigate","addFavourite","pokemon_name","response","fetch","method","headers","Authorization","sessionStorage","getItem","body","JSON","stringify","ok","data","json","success","alert","reponse","status","removeItem","removeFavourite","name","state","refresh","Date","now","window","location","reload","clickTimeout","handleClick","clearTimeout","setTimeout","current","handleDoubleClick","className","children","onClick","onDoubleClick","src","alt","hp","toUpperCase","slice","image","attack","defense","weight","speed"],"sources":["C:/Users/Kumar/Desktop/SSE_POKEMON/pokedex/frontend-app/src/components/PokemonCard.jsx"],"sourcesContent":["import {levels} from '../icons';\r\nimport heartImg from '../images/heart.svg';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useState, useRef } from 'react';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000';\r\n\r\n\r\nfunction PokemonCard({pokemon, index, level=false, sidebar=false}) {\r\n  const doubleClickRef = useRef(false);\r\n  const navigate = useNavigate();\r\n\r\n  async function addFavourite(pokemon_name) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/addFavourite`, {\r\n        method: 'POST',\r\n        headers: {\r\n            Authorization: `Bearer ${sessionStorage.getItem('access_token')}`,\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n            \"pokemon_name\": pokemon_name,\r\n        }),\r\n      });\r\n      if(!response.ok){\r\n        throw response;\r\n      }\r\n      const data = await response.json();\r\n      if(data.success) {\r\n        alert(\"You have added this pokemon to your favourites successfully!\");\r\n      }\r\n    }\r\n    catch(reponse) {\r\n      if (reponse.status === 401) {\r\n        sessionStorage.removeItem('access_token');\r\n        alert('Token issue. Please login again');\r\n      }\r\n      else {\r\n        alert('Something went wrong. Please try again later');\r\n      }\r\n    }\r\n  }\r\n\r\n  async function removeFavourite() {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/removeFavourite`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${sessionStorage.getItem('access_token')}`\r\n        },\r\n        body: JSON.stringify({\r\n            \"pokemon_name\": pokemon.name,\r\n        }),\r\n     });\r\n      if(!response.ok){\r\n        throw response;\r\n      }\r\n      const data = await response.json();\r\n      if(data.success) {\r\n          navigate('/',  { state: { refresh: Date.now() } });\r\n          window.location.reload();\r\n          alert(\"You have removed this pokemon from your favourites successfully!\");\r\n      }\r\n    }\r\n    catch(reponse) {\r\n      if (reponse.status === 401) {\r\n        sessionStorage.removeItem('access_token');\r\n        alert('Token issue. Please login again');\r\n      }\r\n      else {\r\n        alert('Something went wrong. Please try again later');\r\n        }\r\n      }\r\n  }\r\n\r\n  let clickTimeout = null;\r\n\r\n  const handleClick = () => {\r\n    if (clickTimeout) {\r\n      clearTimeout(clickTimeout); // Cancel the single-click timer\r\n    }\r\n    clickTimeout = setTimeout(() => {\r\n      if (!doubleClickRef.current) {\r\n        navigate(`/details/${pokemon.name}`); // Only navigate if no double-click occurred\r\n      }\r\n    }, 600); // Adjust delay to fit double-click recognition timing\r\n  };\r\n  \r\n  const handleDoubleClick = () => {\r\n    if (!sidebar) {\r\n      if (clickTimeout) {\r\n        clearTimeout(clickTimeout); // Cancel the single-click timer\r\n        clickTimeout = null;\r\n      }\r\n      doubleClickRef.current = true; // Mark that a double-click occurred\r\n      if(sessionStorage.getItem('access_token')) {\r\n        addFavourite(pokemon.name);\r\n      }\r\n      else {\r\n        alert(\"Please login to add pokemons to your favourites\");\r\n      }\r\n      setTimeout(() => {\r\n        doubleClickRef.current = false; // Reset double-click flag\r\n      }, 600); \r\n    }\r\n  };\r\n\r\n  // console.log(pokemon)\r\n  // if (pokemon.length === 0) {\r\n  //   console.log(\"Pokemon is null\");\r\n  //   return null\r\n  // }\r\n\r\n  return (\r\n\r\n      <div className='card-container' key={index}>\r\n        <div  className='pokemon-poster normal-type' onClick={handleClick} onDoubleClick={handleDoubleClick}>\r\n          {level && <img className='pokemon-level' src={levels[`lv${pokemon.level}`]} alt='level' />}\r\n          <h3 className='hp'>HP: {pokemon.hp}</h3>\r\n          <div> \r\n            <h3 className='pokemon-name'>{pokemon?.name[0].toUpperCase() + pokemon?.name.slice(1)}</h3>\r\n          </div>\r\n          <img src={pokemon.image} alt={pokemon.name} className='pokemon-poster-img'/>\r\n          {/* <img src={heartImg} alt={pokemon.name} className='pokemon-poster-img card-heart'onClick={handleHeartClick}/> */}\r\n\r\n          <div className='stats-container'>\r\n            <div className='pokemon-stats'>\r\n              <p><strong>ATT</strong>&nbsp;&nbsp;{pokemon.attack}</p> \r\n              <p><strong>DEF</strong>&nbsp;&nbsp;{pokemon.defense}</p>\r\n            </div>\r\n            <div className='pokemon-stats'>\r\n              <p><strong>WEIGHT</strong>&nbsp;&nbsp;{pokemon.weight}</p>\r\n              <p><strong>SPEED</strong>&nbsp;&nbsp;{pokemon.speed}</p>\r\n            </div>\r\n          </div>  \r\n        </div>\r\n        {sidebar && <p className='remove-pokemon' onClick={removeFavourite}>Remove Pokemon</p>   }   \r\n      </div>\r\n\r\n      \r\n  );\r\n}\r\n\r\nexport default PokemonCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}